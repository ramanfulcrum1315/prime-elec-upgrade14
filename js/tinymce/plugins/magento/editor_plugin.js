(function(){tinymce.create('tinymce.plugins.Magento',{getInfo:function(){return{longname:'Magento Plugin',author:'Pierre ROUSSET for BouncingOrange',authorurl:'http://www.bouncingorange.com',infourl:'http://www.magentocommerce.com/extension/1426/bouncingorange-tinymce-wysiwyg-',version:'0.2'}},init:function(ed,url){var t=this;ed.onBeforeSetContent.add(function(ed,o){if(ed.getParam('magento_fix_quote',true))o.content=t._fixQuote(o.content)});var tinyConvertURL=ed.convertURL.bind(ed);ed.convertURL=function(u,n,e){if(ed.getParam('magento_fix_quote',true))u=t._fixQuote(u);return tinyConvertURL(u,n,e)};ed.onSaveContent.add(function(ed,o){if(ed.getParam('magento_fix_nl2br',true))o.content=o.content.replace(/\n/g,'')})},_fixQuote:function(c){var p1=new RegExp('{{(.*?)}}','g');var p2=new RegExp('"','g');return c.replace(p1,function(s){return s.replace(p2,"'")})}});tinymce.PluginManager.add('magento',tinymce.plugins.Magento)})();
